<div class="flex-fill ml-1 overflow-hidden">

  <div data-toggle="collapse"
       class="text-nowrap text-truncate"
       [attr.data-target]="'#' + prefix + '-' + node.name + '-' + index"
       role="button">
    <ng-container *ngIf="!node?.children">
      <button mat-button
              [matMenuTriggerFor]="branchActions"
              (click)="getActions()">
        {{node.name}}
      </button>
    </ng-container>
    <ng-container *ngIf="node?.children">
      {{node.name}}
    </ng-container>
  </div>

  <mat-menu #branchActions="matMenu">
    <ng-container *ngIf="actions && actions.length > 0">
      <button mat-menu-item
              *ngFor="let action of actions"
              (click)="doAction(action)">
        {{action.messageI18n}}
      </button>
    </ng-container>
  </mat-menu>

  <div id="{{prefix}}-{{node.name}}-{{index}}"
       class="collapse"
       [class.show]="open">
    <app-branch-list *ngIf="node?.children !== undefined"
                     [folder]="node"
                     prefix="{{prefix}}"
                     [open]="openSubFolder">
    </app-branch-list>
  </div>
</div>
